<% content_for(:title) { @trip.name } %>

<h1>
  <%= "#{@trip.name}" %>
  <%= render partial: "shared/trip_subscribe_buttons", locals: { trip: @trip } %>
</h1>
<p>
  <em>Created by <%= link_to "#{@trip.creator.username}", @trip.creator %>
   | <%= render partial: "shared/trip_subscriber_stats", locals: { trip: @trip } %>
  </em>
</p>
<% if @trip.whitelist_posters %>
  Whitelisted Users: 
  <%= "#{ @trip.whitelisted_users.map(&:username).join(', ')}" %>
<% end %>

<% if current_user == @trip.creator %>
  <div>
    <%= link_to "Delete", trip_path(@trip), method: :delete, confirm: "Are you sure you want to delete this trip?" %>
    |
    <%= link_to "Edit", edit_trip_path(@trip) %>
  </div>
<% elsif current_user && current_user.administrates(@trip)%>
  <div>
    <%= link_to "Edit", edit_trip_path(@trip) %>
  </div>
<% end %>

<h3>
  <%= "#{@trip.tagline}"%>
</h3>
<p>
  <strong>
    &#35<%= "#{@trip.hashtag}" %>
  </strong>
</p>
<p>
  <%= "#{@trip.description}" %>
</p>

<div class="panel">
  <% if @feed_items.empty? %>
    <div class="no-content-warning">
      <p> There is no content to pull from this hashtag! </p>
      <p> Hint: Try <%= link_to "authorizing some accounts", authorizations_path %>
        so your posts and media will be automatically pulled into your trip feed.  Some providers (e.g. Tumblr) have trouble making your posts visible publicly if you haven't authorized them.
      </p>
    </div>
  <% end %>

  <ul class="single-trip-feed">
    <%= render partial: "shared/feed_item", collection: @feed_items %>
  </ul>
</div>
